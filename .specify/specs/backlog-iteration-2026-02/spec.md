# 需求规格：Backlog 迭代（2026-02）

**Feature Branch**: `codex/backlog-iteration-2026-02`  
**创建日期**: 2026-02-06  
**状态**: Draft  
**输入**: 当前 backlog 自动生成 spec+plan+tasks 模板套件

## 用户场景与测试（必填）

### 用户故事 1 - 展示与体验打磨（优先级：P1）

作为访客，我希望首页/相册列表在移动端展示清爽、交互一致，浏览体验稳定。

**优先级原因**：面向用户的核心体验，直接影响留存与整体观感。

**可独立测试**：移动端浏览首页/相册列表，检查间距、字体、筛选器与布局是否有遮挡或跳动。

**验收场景**：

1. **给定** 首页与相册列表，**当** 在移动端浏览，**则** 间距与筛选器可用且无遮挡。
2. **给定** 按日期排序的媒体列表，**当** 浏览列表，**则** `datetime_original` 优先并正确分组。

---

### 用户故事 2 - 后台上传效率（优先级：P2）

作为管理员，我希望多图上传有明确的单图进度反馈，提高上传效率与信心。

**优先级原因**：后台效率影响内容更新频率，直接影响产品活跃度。

**可独立测试**：选择或粘贴多张图片上传，观察每张图进度遮罩和上传结果汇总。

**验收场景**：

1. **给定** 多张图片加入队列，**当** 上传进行中，**则** 每张图都显示进度百分比。
2. **给定** 上传队列中包含重复图片，**当** 检测重复，**则** 提示并跳过重复项。

---

### 用户故事 3 - 订阅与邮件可靠性（优先级：P3）

作为管理员，我希望 newsletter 发送结果准确，避免“发送 0”的异常。

**优先级原因**：避免后台操作失信与误判。

**可独立测试**：创建 newsletter 并发送，确认返回的发送数量与订阅数量一致。

**验收场景**：

1. **给定** 存在订阅列表，**当** 发送 newsletter，**则** 返回正确的发送数量。

---

### 边界情况

- `datetime_original` 缺失或格式错误时，回退 `created_at`。
- 大文件/慢网环境下上传进度仍应持续更新。
- 邮件服务未配置时返回明确错误码。

## 需求（必填）

### 功能需求

- **FR-001**：媒体排序必须优先 `datetime_original`。
- **FR-002**：多图上传必须显示单图进度百分比。
- **FR-003**：后台支持选择与粘贴多图上传。
- **FR-004**：前台分类列表仅展示 `show_in_frontend=1`。
- **FR-005**：newsletter 发送必须返回准确的发送数量与错误信息。

### 关键实体

- **Media**：`id`, `url`, `object_key`, `datetime_original`, `created_at`, `categories`
- **Album**：`id`, `title`, `cover_media`, `categories`
- **Subscriber**：`email`, `status`

## 成功指标（必填）

### 可量化目标

- **SC-001**：首页/相册列表移动端无布局遮挡与异常滚动。
- **SC-002**：多图上传时每张图片都有进度显示。
- **SC-003**：newsletter 发送结果与订阅数量一致。
